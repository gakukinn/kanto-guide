# 关东旅游指南网站 - 商业项目完整文档

## 🚨🚨🚨 商业网站铁律 - AI必读 🚨🚨🚨

### ⚠️ 这是商业旅游网站 - 绝对不能出错
**千万不能乱编信息！千万不能擅自添加删减无关信息！必须按指令行事！**

## 🚨 商业网站铁律 - AI必读

### ⚠️ 绝对禁止行为
1. **严禁编造信息** - 本项目是商业旅游网站，千万不能乱编信息
2. **严禁擅自添加** - 请千万不要擅自添加无关信息，请按指令行事
3. **严禁推测数据** - 所有信息必须基于真实、可验证的官方数据源

### 📋 强制模板使用规范
- **三层祭典页面**：必须使用 `MatsuriPageTemplate.tsx`
- **三层花火页面**：必须使用 `HanabiPageTemplate.tsx`  
- **四层详情页面**：必须使用 `HanabiDetailTemplate.tsx`

### 🔒 AI操作原则
- 疑问必问，绝不推测
- 只使用用户提供的真实数据
- 保持项目商业专业性
- 严格按用户指令执行

---

## 📈 项目进度报告（最新更新：2025年1月13日）

### 🎯 当前阶段：文档系统整合完成
**目标**：将所有重要文档内容整合到README.md，确保AI能在一个文件中获得完整信息

### ✅ 已完成工作
1. **商业网站铁律建立** - 在README开头设立AI必读规范
2. **模板系统标准化** - 确定3个标准模板，删除无关文件
3. **文档系统整合** - 将docs目录重要内容整合到README.md
4. **祭典模板错误修复** - 修复语法错误、数据验证、显示问题

### 🔍 技术状态检查
- **开发服务器**：端口3010被占用，需要处理端口冲突
- **模板系统**：3个标准模板运行正常
- **数据验证**：祭典数据验证系统完整
- **配色系统**：标准化配色规则已建立

### 📋 下一步工作计划
1. 解决开发服务器端口冲突问题
2. 继续完善祭典页面数据
3. 扩展其他活动类型页面
4. 持续优化用户体验

---

## 📋 项目概况
- **项目名称**：关东地区旅游指南网站（Tokyo Tourism Guide）
- **项目性质**：商业网站 - 日本关东活动指南
- **技术栈**：Next.js 15.3.3 + TypeScript + Tailwind CSS
- **目标用户**：中国游客
- **核心价值**：提供真实、准确的关东地区活动信息

## 🏗️ 四层页面架构详解

#### 🏠 第一层：首页（1个页面）
- **文件位置**：`src/app/page.tsx`
- **主要功能**：地区选择入口
- **用户操作**：选择想要了解的关东地区
- **导航目标**：引导用户进入第二层地区页面
- **设计特点**：展示6个关东地区卡片，每个地区有独特的配色和图标

#### 🗾 第二层：地区页面（6个页面）
- **文件位置**：
  - `src/app/tokyo/page.tsx` - 东京都
  - `src/app/saitama/page.tsx` - 埼玉县
  - `src/app/chiba/page.tsx` - 千叶县
  - `src/app/kanagawa/page.tsx` - 神奈川县
  - `src/app/kitakanto/page.tsx` - 北关东
  - `src/app/koshinetsu/page.tsx` - 甲信越
- **主要功能**：活动类型选择
- **用户操作**：在选定地区内选择感兴趣的活动类型
- **活动类型**：祭典(matsuri)、花火大会(hanabi)、花见会(hanami)、文化艺术(culture)、红叶狩(momiji)、灯光秀(illumination)
- **导航特点**：地区循环导航（东京→埼玉→千叶→神奈川→北关东→甲信越→东京）

#### 📋 第三层：活动列表页面（6个地区 × 各种活动类型）
- **文件位置示例**：
  - `src/app/tokyo/matsuri/page.tsx` - 东京祭典列表
  - `src/app/tokyo/hanabi/page.tsx` - 东京花火大会列表
  - `src/app/saitama/matsuri/page.tsx` - 埼玉祭典列表
  - （其他地区和活动类型类似）
- **主要功能**：展示该地区该类型的所有活动
- **用户操作**：浏览活动列表，选择感兴趣的具体活动
- **页面内容**：活动卡片、筛选功能、排序功能、地区循环导航
- **导航目标**：引导用户进入第四层活动详情页面

#### 📖 第四层：活动详情页面（具体活动的详细介绍）
- **文件位置示例**：
  - `src/app/july/hanabi/tokyo/隅田川花火大会/page.tsx`
  - `src/app/august/hanabi/kanagawa/镰仓花火大会/page.tsx`
  - （每个具体活动都有独立的详情页面）
- **主要功能**：提供活动的完整详细信息
- **页面内容**：
  - 活动基本信息（时间、地点、费用）
  - 详细描述和特色亮点
  - 交通指南和地图
  - 观赏攻略和注意事项
  - 官方网站链接
- **用户价值**：帮助用户做出参加决定并提供实用信息

## 🔥 模板系统（已标准化）

**✅ 最终确定的3个标准模板：**
- **第三层祭典模板**：`src/components/MatsuriPageTemplate.tsx` - 地区祭典页面专用
- **第三层花火模板**：`src/components/HanabiPageTemplate.tsx` - 地区花火页面专用
- **第四层详情模板**：`src/components/HanabiDetailTemplate.tsx` - 活动详细介绍页面

**⚠️ 强制规范：第三层和第四层页面必须使用对应模板完成，严禁自定义页面结构**

## 🎨 标准配色系统

### 地区主题色
| 地区 | 颜色系 | Tailwind类 |
|------|--------|-------------|
| 东京 | 红色系 | `from-red-50 to-rose-100` |
| 埼玉 | 橙色系 | `from-orange-50 to-amber-100` |
| 千叶 | 天蓝色系 | `from-sky-50 to-cyan-100` |
| 神奈川 | 蓝色系 | `from-blue-100 to-blue-200` |
| 北关东 | 绿色系 | `from-green-50 to-emerald-100` |
| 甲信越 | 紫色系 | `from-purple-50 to-violet-100` |

### 活动主题色
| 活动 | 颜色系 | Tailwind类 |
|------|--------|-------------|
| 祭典 | 红色系 | `from-red-50 to-red-100` |
| 花火 | 蓝色系 | `from-blue-50 to-blue-100` |
| 花见 | 粉色系 | `from-pink-50 to-pink-100` |

### 第三层配色公式
```
第三层背景色 = 地区色主调 + 活动色辅调
```

## 🔥 祭典系统技术规范

### 祭典页面制作强制规范

#### ✅ 允许的信息
- 祭典名称（中文、日文、英文）
- 举办日期和时间
- 举办地点
- 活动特色（基于官方描述）
- 红心数（真实用户点赞）
- 官方网站链接

#### ❌ 严禁添加的内容
- 规模分类（大型、中型、小型）
- 主观评价（热门、推荐等）
- 人气排名或等级
- 任何基于数据推测的分类
- 商业化的推广语言

#### AI协作强制要求
1. **绝对禁止**添加任何规模分类
2. **必须询问**用户提供所有必要信息
3. **严禁推测**或编造任何数据
4. **只能使用**用户明确提供的信息
5. **必须验证**所有数据的真实性

### 质量保证系统

#### 强制检查清单
创建新祭典页面时必须检查：

**语法检查**
- [ ] 所有 `useMemo` 依赖数组正确闭合
- [ ] 没有重复的变量声明
- [ ] TypeScript 编译无错误
- [ ] ESLint 检查通过

**数据验证**
- [ ] API 数据字段映射正确
- [ ] 必填字段完整性检查
- [ ] 日期格式标准化
- [ ] 红心数为整数

**功能测试**
- [ ] 筛选器正常工作
- [ ] 排序功能正确
- [ ] 点赞功能正常
- [ ] 导航链接有效

**显示验证**
- [ ] 所有文本使用中文汉字
- [ ] 日期包含完整年份
- [ ] 红心数显示为整数
- [ ] 长文本正确截断

#### 验证脚本
```bash
# 语法检查
npm run validate-matsuri

# 数据验证
node scripts/validate-matsuri-template.js

# 完整测试
npm run test-matsuri
```

## 🚫 绝对禁止的操作

### 技术层面
- ❌ 在 `useMemo` 依赖数组后添加分号
- ❌ 重复声明同名变量
- ❌ 忽略 TypeScript 编译错误
- ❌ 跳过 ESLint 检查

### 数据层面
- ❌ 假设 API 字段名称固定
- ❌ 忽略数据验证
- ❌ 硬编码年份信息
- ❌ 允许非整数红心数

### 内容层面
- ❌ 编造任何祭典信息
- ❌ 添加主观评价或分类
- ❌ 推测活动规模或人气
- ❌ 使用非官方数据源

## 🛠️ 自动化系统

### 祭典数据系统架构
- **数据抓取**：Crawlee + Playwright
- **数据验证**：Zod Schema
- **任务调度**：Node-cron
- **错误处理**：完整的错误边界和重试机制

### 调度策略
- **数据更新**：每月1日凌晨2点
- **数据验证**：每月15日凌晨3点  
- **即将活动检查**：每周一凌晨1点

### 维护工具
```bash
# 系统健康检查
npm run matsuri:health

# 数据验证
npm run matsuri:validate

# 统计报告
npm run matsuri:stats

# 手动更新
npm run matsuri:update
```

## 🎯 地区循环导航系统

### 循环顺序
```
东京 → 埼玉 → 千叶 → 神奈川 → 北关东 → 甲信越 → 东京
```

### 导航配置
| 地区 | 显示名 | 图标 | URL |
|------|--------|------|-----|
| 东京 | 东京 | 🗼 | `/tokyo/matsuri` |
| 埼玉 | 埼玉 | 🏮 | `/saitama/matsuri` |
| 千叶 | 千叶 | 🌊 | `/chiba/matsuri` |
| 神奈川 | 神奈川 | ⛵ | `/kanagawa/matsuri` |
| 北关东 | 北关东 | ♨️ | `/kitakanto/matsuri` |
| 甲信越 | 甲信越 | 🗻 | `/koshinetsu/matsuri` |

### 导航功能
- **三按钮布局**：上一个 ← 当前 → 下一个
- **自动循环**：甲信越的下一个是东京
- **智能配色**：每个按钮使用对应地区主题色
- **悬停效果**：缩放和颜色变化交互

## ⚠️ 重要技术约束

### 商业级质量要求
1. **数据真实性**：所有活动信息必须基于真实数据源
2. **中文本地化**：面向中国用户，所有内容必须中文化
3. **性能标准**：首次渲染 < 500ms，筛选响应 < 100ms
4. **SEO优化**：每个页面都需要良好的SEO表现

### 开发规范
1. **TypeScript严格模式**：所有代码必须通过类型检查
2. **ESLint规则**：严格遵循代码规范
3. **错误边界**：每个组件都有错误处理机制
4. **测试覆盖**：关键功能必须有测试用例

### 数据源要求
1. **官方优先**：优先使用官方网站数据
2. **可验证性**：所有数据必须提供来源链接
3. **时效性**：定期更新，确保信息准确
4. **完整性**：所有必填字段必须完整

---

## Getting Started

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建项目
npm run build

# 运行测试
npm run test

# 验证祭典模板
npm run validate-matsuri
```

**注意**：如果遇到端口冲突，请检查端口3010是否被占用，可能需要停止其他服务或更改端口配置。

---

**最后更新**：2025年1月13日 - 文档系统整合完成
