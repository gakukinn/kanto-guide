# 0628 立即恢复方案

## 🚨 紧急情况
AI错误覆盖了用户原有的61个花火页面，需要立即恢复。

## 📋 恢复检查清单

### 步骤1: 确认备份可用性
```bash
# 检查备份完整性
ls -la backups/0628-project-backup/app/
ls -la backups/0627-project-backup/app/
```

### 步骤2: 停止当前服务
```bash
# 停止开发服务器
Ctrl+C
# 或者强制停止
taskkill /f /im node.exe
```

### 步骤3: 创建当前状态备份（以防需要）
```bash
# 备份当前错误状态（以防需要参考）
mkdir backups/0628-error-state
cp -r app backups/0628-error-state/
cp -r data backups/0628-error-state/
```

### 步骤4: 恢复原始文件

#### 方案A: 从今天备份恢复
```bash
# 恢复app目录
rm -rf app/
cp -r backups/0628-project-backup/app ./

# 恢复data目录  
rm -rf data/
cp -r backups/0628-project-backup/data ./

# 恢复组件目录
rm -rf components/
cp -r backups/0628-project-backup/components ./
```

#### 方案B: 从昨天备份恢复
```bash
# 如果今天备份也有问题，使用昨天的
rm -rf app/
cp -r backups/0627-project-backup/app ./

rm -rf data/
cp -r backups/0627-project-backup/data ./
```

### 步骤5: 恢复数据库（如适用）
```bash
# 恢复数据库到6月24日状态
cp backups/dev-0624.db prisma/dev.db
```

### 步骤6: 清理错误脚本
```bash
# 删除今天创建的破坏性脚本
rm scripts/generate-missing-hanabi-pages.js
rm scripts/fix-hanabi-import-paths.js  
rm scripts/fix-hanabi-breadcrumb-and-images.js
rm scripts/update-region-hanabi-summaries.js
```

### 步骤7: 重启服务验证
```bash
# 重新安装依赖（如需要）
npm install

# 启动开发服务器
npm run dev
```

### 步骤8: 验证恢复效果
访问以下页面确认恢复：
- http://localhost:3000/tokyo/hanabi
- http://localhost:3000/saitama/hanabi  
- 检查具体花火详情页面是否恢复到原始状态

## ⚠️ 重要注意事项

1. **执行前与用户确认**: 在执行任何恢复操作前，必须与用户确认使用哪个备份版本
2. **保留错误状态**: 在恢复前先备份当前错误状态，以备分析使用
3. **逐步验证**: 每一步完成后都要与用户确认效果
4. **记录过程**: 记录恢复过程中的每一步，便于后续分析

## 📞 用户确认问题

请用户确认以下问题：
1. 您希望恢复到哪个时间点的版本？
2. 您的原始花火页面使用什么模板？
3. 原始页面的数据格式是什么样的？
4. 是否有其他重要文件需要特别保护？

## 🔍 恢复后诊断

恢复完成后需要检查：
1. 页面是否正常显示
2. 链接是否都正常工作
3. 数据格式是否符合原始要求
4. 是否还有其他功能受到影响

---

**优先级**: 🔥 最高优先级 - 立即执行
**责任人**: AI必须在用户指导下小心执行
**目标**: 100%恢复用户原始页面状态 