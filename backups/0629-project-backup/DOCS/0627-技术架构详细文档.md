# æ—¥æœ¬æ—…æ¸¸æŒ‡å—ç½‘ç«™æŠ€æœ¯æ¶æ„è¯¦ç»†æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025å¹´6æœˆ27æ—¥  
**æŠ€æœ¯è´Ÿè´£**: AI Assistant  
**æ¶æ„ç±»å‹**: æ··åˆæ¸²æŸ“é™æ€ä¼˜å…ˆæ¶æ„  

---

## ğŸ—ï¸ æ¶æ„æ€»è§ˆ

### è®¾è®¡ç†å¿µ
**æ··åˆæ¸²æŸ“é™æ€ä¼˜å…ˆæ¶æ„**: æ ¹æ®æ•°æ®ç‰¹æ€§å’Œç”¨æˆ·éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„æ¸²æŸ“æ–¹å¼ï¼Œä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

```
æ¶æ„ç‰¹ç‚¹:
â”œâ”€â”€ é™æ€ä¼˜å…ˆ: æœ€å¤§åŒ–é™æ€å†…å®¹ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½
â”œâ”€â”€ æ··åˆæ¸²æŸ“: SSG + SSRï¼Œå„å–æ‰€é•¿
â”œâ”€â”€ æ•°æ®é©±åŠ¨: åŸºäºJSONæ–‡ä»¶çš„æ•°æ®ç®¡ç†
â””â”€â”€ ç»„ä»¶åŒ–: å¯å¤ç”¨çš„Reactç»„ä»¶ç³»ç»Ÿ
```

### æ ¸å¿ƒæŠ€æœ¯é€‰æ‹©

#### å‰ç«¯æ¡†æ¶
```typescript
// Next.js 14 - ç°ä»£Reactæ¡†æ¶
const frameworkFeatures = {
  appRouter: "App Routeræ¶æ„ï¼Œæ”¯æŒåµŒå¥—å¸ƒå±€",
  serverComponents: "React Server Componentsï¼Œä¼˜åŒ–æ€§èƒ½",
  staticGeneration: "é™æ€ç«™ç‚¹ç”Ÿæˆï¼ŒSEOå‹å¥½",
  serverSideRendering: "æœåŠ¡ç«¯æ¸²æŸ“ï¼ŒåŠ¨æ€æ•°æ®æ”¯æŒ",
  apiRoutes: "å†…ç½®APIè·¯ç”±ï¼Œåç«¯åŠŸèƒ½é›†æˆ"
};
```

#### å¼€å‘è¯­è¨€
```typescript
// TypeScript - ç±»å‹å®‰å…¨çš„JavaScript
interface TechStack {
  language: "TypeScript 5.x";
  benefits: [
    "ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥",
    "æ›´å¥½çš„IDEæ”¯æŒ",
    "ä»£ç å¯ç»´æŠ¤æ€§",
    "å›¢é˜Ÿåä½œæ•ˆç‡"
  ];
  configuration: "ä¸¥æ ¼æ¨¡å¼ï¼Œå…¨é¡¹ç›®è¦†ç›–";
}
```

#### æ ·å¼ç³»ç»Ÿ
```css
/* Tailwind CSS - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶ */
.advantages {
  @apply 
    /* å¿«é€Ÿå¼€å‘ */ rapid-development
    /* ä¸€è‡´æ€§è®¾è®¡ */ consistent-design  
    /* å“åº”å¼å¸ƒå±€ */ responsive-layout
    /* ä¼˜åŒ–æ„å»º */ optimized-build;
}
```

#### æ•°æ®åº“ä¸ORM
```prisma
// Prisma + SQLite - ç°ä»£æ•°æ®åº“å·¥å…·é“¾
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// ä¼˜åŠ¿:
// 1. ç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®
// 2. è‡ªåŠ¨ç”Ÿæˆçš„å®¢æˆ·ç«¯
// 3. æ•°æ®åº“è¿ç§»ç®¡ç†
// 4. ç›´è§‚çš„Schemaå®šä¹‰
```

---

## ğŸ“± é¡µé¢æ¶æ„è®¾è®¡

### æ¸²æŸ“ç­–ç•¥

#### å››å±‚é¡µé¢æ¶æ„
```
æ¸²æŸ“ç­–ç•¥åˆ†å±‚:
â”œâ”€â”€ Layer 1: é¦–é¡µ (/) 
â”‚   â””â”€â”€ æ¸²æŸ“æ–¹å¼: é™æ€ç”Ÿæˆ (SSG)
â”‚   â””â”€â”€ æ•°æ®æº: ç¡¬ç¼–ç é…ç½®
â”‚
â”œâ”€â”€ Layer 2: åœ°åŒºé¦–é¡µ (/tokyo, /saitama, ...)
â”‚   â””â”€â”€ æ¸²æŸ“æ–¹å¼: é™æ€ç”Ÿæˆ (SSG)  
â”‚   â””â”€â”€ æ•°æ®æº: é™æ€é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ Layer 3: æ´»åŠ¨åˆ—è¡¨é¡µ (/tokyo/hanabi, /saitama/matsuri, ...)
â”‚   â””â”€â”€ æ¸²æŸ“æ–¹å¼: æœåŠ¡ç«¯æ¸²æŸ“ (SSR)
â”‚   â””â”€â”€ æ•°æ®æº: JSONæ–‡ä»¶åŠ¨æ€è¯»å–
â”‚
â””â”€â”€ Layer 4: æ´»åŠ¨è¯¦æƒ…é¡µ (/tokyo/hanabi/activity-xxx, ...)
    â””â”€â”€ æ¸²æŸ“æ–¹å¼: é™æ€ç”Ÿæˆ (SSG)
    â””â”€â”€ æ•°æ®æº: é¡µé¢å†…ç¡¬ç¼–ç 
```

#### æ¸²æŸ“æ–¹å¼é€‰æ‹©é€»è¾‘
```typescript
// æ¸²æŸ“æ–¹å¼å†³ç­–æ ‘
const renderingStrategy = (pageType: string, dataFrequency: string) => {
  if (pageType === 'detail' && dataFrequency === 'static') {
    return 'SSG'; // è¯¦æƒ…é¡µï¼Œæ•°æ®ä¸å¸¸å˜æ›´
  }
  if (pageType === 'list' && dataFrequency === 'dynamic') {
    return 'SSR'; // åˆ—è¡¨é¡µï¼Œæ•°æ®å¯èƒ½æ›´æ–°
  }
  if (pageType === 'landing' && dataFrequency === 'static') {
    return 'SSG'; // é¦–é¡µï¼Œé…ç½®ç›¸å¯¹å›ºå®š
  }
  return 'SSR'; // é»˜è®¤æœåŠ¡ç«¯æ¸²æŸ“
};
```

### è·¯ç”±è®¾è®¡

#### åŠ¨æ€è·¯ç”±ç»“æ„
```typescript
// appç›®å½•ç»“æ„æ˜ å°„åˆ°URLè·¯ç”±
const routeMapping = {
  '/': 'app/page.tsx',                    // é¦–é¡µ
  '/[region]': 'app/[region]/page.tsx',   // åœ°åŒºé¦–é¡µ
  '/[region]/[activity]': 'app/[region]/[activity]/page.tsx', // æ´»åŠ¨åˆ—è¡¨
  '/[region]/[activity]/[activityId]': 'app/[region]/[activity]/[activityId]/page.tsx' // è¯¦æƒ…é¡µ
};

// å‚æ•°éªŒè¯
const validateParams = (region: string, activity: string) => {
  const validRegions = ['tokyo', 'saitama', 'chiba', 'kanagawa', 'kitakanto', 'koshinetsu'];
  const validActivities = ['hanabi', 'hanami', 'matsuri', 'momiji', 'illumination', 'culture'];
  
  return validRegions.includes(region) && validActivities.includes(activity);
};
```

---

## ğŸ—„ï¸ æ•°æ®æ¶æ„

### æ•°æ®åº“è®¾è®¡

#### æ ¸å¿ƒå®ä½“æ¨¡å‹
```prisma
// åœ°åŒºå®ä½“
model Region {
  id        String   @id @default(cuid())
  code      String   @unique // tokyo, saitama, etc.
  nameCn    String   // ä¸­æ–‡åç§°
  nameJp    String   // æ—¥æ–‡åç§°
  emoji     String   // è¡¨æƒ…ç¬¦å·
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// æ´»åŠ¨å®ä½“ï¼ˆä»¥èŠ±ç«ä¸ºä¾‹ï¼Œå…¶ä»–5ç§æ´»åŠ¨ç»“æ„ç›¸åŒï¼‰
model HanabiEvent {
  id          String   @id @default(cuid())
  region      String   // åœ°åŒºä»£ç 
  detailLink  String?  // è¯¦æƒ…é¡µé“¾æ¥
  
  // Jalanåé¡¹æ ‡å‡†å­—æ®µ
  name        String   // 1. æ´»åŠ¨åç§°
  address     String   // 2. æ‰€åœ¨åœ°å€
  datetime    String   // 3. å¼€å‚¬æ—¶é—´
  venue       String   // 4. å¼€å‚¬åœºæ‰€
  access      String   // 5. äº¤é€šæ–¹å¼
  organizer   String   // 6. ä¸»åŠæ–¹
  price       String   // 7. è´¹ç”¨ä¿¡æ¯
  contact     String   // 8. è”ç³»æ–¹å¼
  website     String   // 9. å®˜æ–¹ç½‘ç«™
  googleMap   String   // 10. åœ°å›¾é“¾æ¥
  
  // æ‰©å±•å­—æ®µ
  description String?  // æ´»åŠ¨æè¿°
  status      String   @default("active")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([region, status])
}
```

#### æ•°æ®ä¸€è‡´æ€§ä¿è¯
```typescript
// æ•°æ®éªŒè¯æ¥å£
interface DataValidation {
  jalanStandards: {
    requiredFields: string[];
    optionalFields: string[];
    validation: (data: any) => boolean;
  };
  linkConsistency: {
    detailLinkFormat: RegExp;
    pathValidation: (link: string) => boolean;
  };
}

// å®ç°
const validateActivityData = (data: ActivityData): ValidationResult => {
  const requiredFields = ['name', 'address', 'datetime', 'venue', 'access', 
                          'organizer', 'price', 'contact', 'website', 'googleMap'];
  
  const missingFields = requiredFields.filter(field => !data[field]);
  const isValidLink = /^\/[a-z]+\/[a-z]+\/activity-\d{8}$/.test(data.detailLink);
  
  return {
    isValid: missingFields.length === 0 && isValidLink,
    missingFields,
    linkValid: isValidLink
  };
};
```

### JSONæ•°æ®ç»“æ„

#### æ–‡ä»¶ç»„ç»‡
```
data/
â””â”€â”€ regions/
    â”œâ”€â”€ tokyo/
    â”‚   â”œâ”€â”€ hanabi.json      # ä¸œäº¬èŠ±ç«æ´»åŠ¨
    â”‚   â”œâ”€â”€ hanami.json      # ä¸œäº¬èŠ±è§æ´»åŠ¨
    â”‚   â””â”€â”€ matsuri.json     # ä¸œäº¬ç¥­å…¸æ´»åŠ¨
    â”œâ”€â”€ saitama/
    â”‚   â”œâ”€â”€ hanabi.json
    â”‚   â”œâ”€â”€ hanami.json
    â”‚   â””â”€â”€ matsuri.json
    â””â”€â”€ ... (å…¶ä»–åœ°åŒº)
```

#### JSONæ•°æ®æ ¼å¼
```typescript
// æ ‡å‡†JSONæ•°æ®ç»“æ„
interface RegionActivityData {
  metadata: {
    region: string;
    activity: string;
    lastUpdated: string;
    version: string;
  };
  activities: ActivityItem[];
}

interface ActivityItem {
  id: string;
  title: string;
  description: string;
  detailLink: string;
  imageUrl?: string;
  
  // Jalanåé¡¹æ ‡å‡†ä¿¡æ¯
  jalanData: {
    name: string;
    address: string;
    datetime: string;
    venue: string;
    access: string;
    organizer: string;
    price: string;
    contact: string;
    website: string;
    googleMap: string;
  };
}
```

---

## ğŸ”§ ç»„ä»¶æ¶æ„

### ç»„ä»¶åˆ†å±‚

#### ç»„ä»¶å±‚æ¬¡ç»“æ„
```
ç»„ä»¶æ¶æ„:
â”œâ”€â”€ Pages (é¡µé¢å±‚)
â”‚   â”œâ”€â”€ HomePage
â”‚   â”œâ”€â”€ RegionPage  
â”‚   â”œâ”€â”€ ActivityListPage
â”‚   â””â”€â”€ ActivityDetailPage
â”‚
â”œâ”€â”€ Templates (æ¨¡æ¿å±‚)
â”‚   â”œâ”€â”€ UniversalStaticPageTemplate
â”‚   â”œâ”€â”€ HanabiDetailTemplate
â”‚   â”œâ”€â”€ MatsuriDetailTemplate
â”‚   â””â”€â”€ HanamiDetailTemplate
â”‚
â”œâ”€â”€ Components (ç»„ä»¶å±‚)
â”‚   â”œâ”€â”€ Navigation
â”‚   â”œâ”€â”€ ActivityCard
â”‚   â”œâ”€â”€ RegionSelector
â”‚   â””â”€â”€ Footer
â”‚
â””â”€â”€ UI (åŸºç¡€UIå±‚)
    â”œâ”€â”€ Button
    â”œâ”€â”€ Card
    â”œâ”€â”€ Modal
    â””â”€â”€ Form
```

#### æ ¸å¿ƒæ¨¡æ¿ç»„ä»¶
```typescript
// é€šç”¨é™æ€é¡µé¢æ¨¡æ¿
interface UniversalStaticPageTemplateProps {
  region: RegionConfig;
  events: ActivityItem[];
  regionKey: string;
  activityKey: string;
  activityDisplayName: string;
  activityEmoji: string;
}

const UniversalStaticPageTemplate: React.FC<UniversalStaticPageTemplateProps> = ({
  region,
  events,
  regionKey,
  activityKey,
  activityDisplayName,
  activityEmoji
}) => {
  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-purple-50">
      <Navigation region={region} />
      <ActivityList 
        events={events}
        activityType={activityDisplayName}
        emoji={activityEmoji}
      />
      <Footer />
    </div>
  );
};
```

### çŠ¶æ€ç®¡ç†

#### çŠ¶æ€ç®¡ç†ç­–ç•¥
```typescript
// ç®€å•çŠ¶æ€ç®¡ç† - Reactå†…ç½®Hook
const useActivityData = (region: string, activity: string) => {
  const [data, setData] = useState<ActivityItem[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  
  useEffect(() => {
    const fetchData = async () => {
      try {
        const response = await fetch(`/api/activities/${region}/${activity}`);
        const result = await response.json();
        setData(result.activities);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };
    
    fetchData();
  }, [region, activity]);
  
  return { data, loading, error };
};
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### é™æ€ä¼˜åŒ–

#### æ„å»ºæ—¶ä¼˜åŒ–
```typescript
// Next.jsé…ç½®ä¼˜åŒ–
const nextConfig = {
  // é™æ€å¯¼å‡ºé…ç½®
  trailingSlash: true,
  
  // å›¾ç‰‡ä¼˜åŒ–
  images: {
    unoptimized: true, // é™æ€å¯¼å‡ºæ—¶ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–
  },
  
  // ç¼–è¯‘ä¼˜åŒ–
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
  
  // å®éªŒæ€§åŠŸèƒ½
  experimental: {
    appDir: true,
  },
};
```

#### ä»£ç åˆ†å‰²
```typescript
// åŠ¨æ€å¯¼å…¥å®ç°ä»£ç åˆ†å‰²
const AdminPanel = dynamic(() => import('../components/AdminPanel'), {
  loading: () => <div>Loading...</div>,
  ssr: false, // ç®¡ç†é¢æ¿ä¸éœ€è¦SSR
});

const ActivityMap = dynamic(() => import('../components/ActivityMap'), {
  loading: () => <div>Loading map...</div>,
});
```

### è¿è¡Œæ—¶ä¼˜åŒ–

#### ç¼“å­˜ç­–ç•¥
```typescript
// APIè·¯ç”±ç¼“å­˜
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const region = searchParams.get('region');
  const activity = searchParams.get('activity');
  
  // è®¾ç½®ç¼“å­˜å¤´
  const headers = {
    'Cache-Control': 'public, s-maxage=3600, stale-while-revalidate=86400',
    'Content-Type': 'application/json',
  };
  
  const data = await getActivityData(region, activity);
  
  return new Response(JSON.stringify(data), { headers });
}
```

#### èµ„æºä¼˜åŒ–
```typescript
// å›¾ç‰‡æ‡’åŠ è½½
const OptimizedImage: React.FC<ImageProps> = ({ src, alt, ...props }) => {
  return (
    <Image
      src={src}
      alt={alt}
      loading="lazy"
      placeholder="blur"
      blurDataURL="data:image/jpeg;base64,..."
      {...props}
    />
  );
};
```

---

## ğŸ” å®‰å…¨ä¸é”™è¯¯å¤„ç†

### æ•°æ®éªŒè¯

#### è¾“å…¥éªŒè¯
```typescript
// Zod schemaéªŒè¯
import { z } from 'zod';

const ActivityDataSchema = z.object({
  name: z.string().min(1).max(100),
  address: z.string().min(1),
  datetime: z.string().min(1),
  venue: z.string().min(1),
  access: z.string().min(1),
  organizer: z.string().min(1),
  price: z.string().min(1),
  contact: z.string().min(1),
  website: z.string().url(),
  googleMap: z.string().url(),
});

// APIè·¯ç”±ä¸­ä½¿ç”¨
export async function POST(request: Request) {
  try {
    const body = await request.json();
    const validatedData = ActivityDataSchema.parse(body);
    
    // å¤„ç†éªŒè¯é€šè¿‡çš„æ•°æ®
    const result = await saveActivityData(validatedData);
    return Response.json(result);
    
  } catch (error) {
    if (error instanceof z.ZodError) {
      return Response.json(
        { error: 'Validation failed', details: error.errors },
        { status: 400 }
      );
    }
    
    return Response.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}
```

### é”™è¯¯è¾¹ç•Œ

#### Reacté”™è¯¯è¾¹ç•Œ
```typescript
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }
  
  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }
  
  componentDidCatch(error, errorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <div className="error-fallback">
          <h2>Something went wrong</h2>
          <details>
            {this.state.error && this.state.error.toString()}
          </details>
        </div>
      );
    }
    
    return this.props.children;
  }
}
```

---

## ğŸ“Š ç›‘æ§ä¸åˆ†æ

### æ€§èƒ½ç›‘æ§

#### Core Web Vitals
```typescript
// æ€§èƒ½æŒ‡æ ‡æ”¶é›†
export function reportWebVitals(metric) {
  switch (metric.name) {
    case 'CLS':
    case 'FID':
    case 'FCP':
    case 'LCP':
    case 'TTFB':
      // å‘é€åˆ°åˆ†ææœåŠ¡
      analytics.track('Web Vital', {
        name: metric.name,
        value: metric.value,
        id: metric.id,
      });
      break;
    default:
      break;
  }
}
```

### é”™è¯¯è¿½è¸ª

#### é”™è¯¯æ—¥å¿—ç³»ç»Ÿ
```typescript
// é”™è¯¯æ—¥å¿—æ”¶é›†
const logger = {
  error: (message: string, error?: Error) => {
    console.error(message, error);
    
    // å‘é€åˆ°é”™è¯¯è¿½è¸ªæœåŠ¡
    if (process.env.NODE_ENV === 'production') {
      errorTracker.captureException(error || new Error(message));
    }
  },
  
  warn: (message: string) => {
    console.warn(message);
  },
  
  info: (message: string) => {
    console.info(message);
  }
};
```

---

## ğŸ› ï¸ å¼€å‘å·¥å…·é“¾

### ä»£ç è´¨é‡

#### ESLinté…ç½®
```json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "prefer-const": "error",
    "no-console": "warn"
  }
}
```

#### Prettieré…ç½®
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

### æµ‹è¯•ç­–ç•¥

#### æµ‹è¯•ç±»å‹
```typescript
// å•å…ƒæµ‹è¯• - Jest + Testing Library
describe('ActivityCard Component', () => {
  it('renders activity information correctly', () => {
    const mockActivity = {
      id: '1',
      title: 'Test Activity',
      description: 'Test Description',
      detailLink: '/test/link'
    };
    
    render(<ActivityCard activity={mockActivity} />);
    
    expect(screen.getByText('Test Activity')).toBeInTheDocument();
    expect(screen.getByText('Test Description')).toBeInTheDocument();
  });
});

// é›†æˆæµ‹è¯•
describe('Activity API', () => {
  it('returns activity data for valid region and activity', async () => {
    const response = await fetch('/api/activities/tokyo/hanabi');
    const data = await response.json();
    
    expect(response.status).toBe(200);
    expect(data.activities).toBeDefined();
    expect(Array.isArray(data.activities)).toBe(true);
  });
});
```

---

## ğŸ”§ æ•°æ®æå–æŠ€æœ¯

### åœ°å›¾åæ ‡æå–æŠ€æœ¯ (Playwright + Cheerio)

#### æŠ€æœ¯èƒŒæ™¯
ä½¿ç”¨Playwrightæµè§ˆå™¨è‡ªåŠ¨åŒ–+Cheerio HTMLè§£ææŠ€æœ¯ï¼Œä»Jalanå®˜æ–¹ç½‘ç«™ç²¾ç¡®æå–åœ°å›¾åæ ‡ä¿¡æ¯ï¼Œç¡®ä¿ä½ç½®ä¿¡æ¯çš„å‡†ç¡®æ€§ã€‚

#### æ ¸å¿ƒå®ç°
```javascript
// å¤šæ–¹æ³•åæ ‡æå–ç­–ç•¥
const extractCoordinates = async (page) => {
  // æ–¹æ³•1: iframeåœ°å›¾åˆ†æ
  const iframeCoords = await page.evaluate(() => {
    const iframes = Array.from(document.querySelectorAll('iframe'));
    for (const iframe of iframes) {
      const src = iframe.src;
      if (src && (src.includes('maps.google') || src.includes('google.com/maps'))) {
        const coordsMatch = src.match(/[!@]([0-9.-]+),([0-9.-]+)/);
        if (coordsMatch) {
          return { lat: parseFloat(coordsMatch[1]), lng: parseFloat(coordsMatch[2]) };
        }
      }
    }
  });

  // æ–¹æ³•2: JavaScriptå˜é‡æœç´¢
  const jsCoords = await page.evaluate(() => {
    const scripts = Array.from(document.querySelectorAll('script'));
    for (const script of scripts) {
      const text = script.textContent || '';
      const patterns = [
        /lat[:\s]*([0-9.]+)[\s,]*lng[:\s]*([0-9.]+)/gi,
        /latitude[:\s]*([0-9.]+)[\s,]*longitude[:\s]*([0-9.]+)/gi,
      ];
      // æ—¥æœ¬åæ ‡èŒƒå›´éªŒè¯: lat(30-40), lng(135-145)
    }
  });

  // æ–¹æ³•3: é“¾æ¥åæ ‡æå– â­ (æœ€å¯é æ–¹æ³•)
  const linkCoords = await page.evaluate(() => {
    const links = Array.from(document.querySelectorAll('a[href*="maps"], a[href*="google"]'));
    for (const link of links) {
      const href = link.href;
      const patterns = [
        /@([0-9.-]+),([0-9.-]+)/,
        /ll=([0-9.-]+),([0-9.-]+)/,
        /center=([0-9.-]+),([0-9.-]+)/,
        /q=([0-9.-]+),([0-9.-]+)/
      ];
      for (const pattern of patterns) {
        const match = href.match(pattern);
        if (match) {
          const lat = parseFloat(match[1]);
          const lng = parseFloat(match[2]);
          // éªŒè¯åæ ‡åœ¨æ—¥æœ¬èŒƒå›´å†…
          if (lat >= 30 && lat <= 40 && lng >= 135 && lng <= 145) {
            return { lat, lng, source: 'Google Maps link' };
          }
        }
      }
    }
  });

  // æŒ‰ä¼˜å…ˆçº§è¿”å›ç»“æœ
  return linkCoords || iframeCoords || jsCoords || null;
};
```

#### æˆåŠŸæ¡ˆä¾‹
- **æˆç”°ç¥‡åœ’ç¥­åæ ‡æå–**: ä»ä¼°ç®—å€¼35.7779, 140.3168æå‡åˆ°å®˜æ–¹ç²¾ç¡®å€¼35.786063, 140.318295
- **ç²¾åº¦æå‡**: çº¦800ç±³çš„ä½ç½®åå·®ä¿®æ­£
- **æ•°æ®æ¥æº**: Google Mapså®˜æ–¹é“¾æ¥éªŒè¯

### Jalanåé¡¹æ ‡å‡†æ•°æ®ç»“æ„

#### æ•°æ®æ ‡å‡†å®šä¹‰
```typescript
interface JalanStandardData {
  name: string;        // 1. æ´»åŠ¨åç§°
  address: string;     // 2. æ‰€åœ¨åœ°å€  
  datetime: string;    // 3. å¼€å‚¬æ—¶é—´ï¼ˆæ—¥æœŸ+æ—¶é—´æ®µåˆå¹¶ï¼‰
  venue: string;       // 4. å¼€å‚¬åœºæ‰€
  access: string;      // 5. äº¤é€šæ–¹å¼
  organizer: string;   // 6. ä¸»åŠæ–¹
  price: string;       // 7. è´¹ç”¨ä¿¡æ¯
  contact: string;     // 8. è”ç³»æ–¹å¼
  website: string;     // 9. å®˜æ–¹ç½‘ç«™
  googleMap: string;   // 10. åœ°å›¾é“¾æ¥/åæ ‡
}
```

#### æ•°æ®éªŒè¯æœºåˆ¶
```typescript
const validateJalanData = (data: JalanStandardData): ValidationResult => {
  const requiredFields = ['name', 'address', 'datetime', 'venue', 'access', 
                          'organizer', 'price', 'contact', 'website', 'googleMap'];
  
  const missingFields = requiredFields.filter(field => !data[field]);
  
  // åæ ‡æ ¼å¼éªŒè¯
  const coordsValid = /^[0-9.-]+,[0-9.-]+$/.test(data.googleMap) || 
                     /^https:\/\/maps\.google/.test(data.googleMap);
  
  // ç½‘ç«™URLéªŒè¯
  const websiteValid = /^https?:\/\//.test(data.website);
  
  return {
    isValid: missingFields.length === 0 && coordsValid && websiteValid,
    missingFields,
    coordsValid,
    websiteValid
  };
};
```

---

## ğŸ”® æ¶æ„æ¼”è¿›è®¡åˆ’

### è¿‘æœŸä¼˜åŒ–ï¼ˆ1-2ä¸ªæœˆï¼‰
1. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°æ›´ç»†ç²’åº¦çš„ä»£ç åˆ†å‰²
   - ä¼˜åŒ–å›¾ç‰‡åŠ è½½ç­–ç•¥
   - å®ç°Service Workerç¼“å­˜

2. **å¼€å‘ä½“éªŒ**
   - å®Œå–„TypeScriptç±»å‹å®šä¹‰
   - å¢åŠ æ›´å¤šå•å…ƒæµ‹è¯•
   - ä¼˜åŒ–æ„å»ºæµç¨‹

### ä¸­æœŸæ¼”è¿›ï¼ˆ3-6ä¸ªæœˆï¼‰
1. **æ¶æ„å‡çº§**
   - è€ƒè™‘å¼•å…¥çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Zustandï¼‰
   - å®ç°æ›´å¤æ‚çš„ç¼“å­˜ç­–ç•¥
   - å¾®å‰ç«¯æ¶æ„æ¢ç´¢

2. **åŠŸèƒ½æ‰©å±•**
   - å®ç°å®æ—¶æ•°æ®åŒæ­¥
   - æ·»åŠ ç”¨æˆ·ä¸ªæ€§åŒ–åŠŸèƒ½
   - é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡

### é•¿æœŸè§„åˆ’ï¼ˆ6ä¸ªæœˆ+ï¼‰
1. **æŠ€æœ¯æ ˆæ¼”è¿›**
   - è€ƒè™‘è¿ç§»åˆ°æœ€æ–°çš„Reactç‰¹æ€§
   - æ¢ç´¢è¾¹ç¼˜è®¡ç®—éƒ¨ç½²
   - å®ç°å…¨æ ˆTypeScript

2. **æ¶æ„é‡æ„**
   - å¾®æœåŠ¡æ¶æ„è®¾è®¡
   - æ•°æ®åº“åˆ†ç¦»ä¸ä¼˜åŒ–
   - APIç½‘å…³å®ç°

---

**æ¶æ„ç»´æŠ¤**: æœ¬æ–‡æ¡£åº”éšç€æŠ€æœ¯æ ˆæ›´æ–°å’Œæ¶æ„æ¼”è¿›åŠæ—¶æ›´æ–°ï¼Œç¡®ä¿æŠ€æœ¯å†³ç­–çš„é€æ˜æ€§å’Œå¯è¿½æº¯æ€§ã€‚ 