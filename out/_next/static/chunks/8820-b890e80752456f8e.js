(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8820],{2458:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(5155),s=a(6874),n=a.n(s),l=a(2115);let i={REGION_COLORS:{tokyo:{from:"red-50",to:"rose-100",primary:"red-600",secondary:"rose-500"},saitama:{from:"orange-50",to:"amber-100",primary:"orange-600",secondary:"amber-500"},chiba:{from:"sky-50",to:"cyan-100",primary:"sky-600",secondary:"cyan-500"},kanagawa:{from:"blue-100",to:"blue-200",primary:"blue-600",secondary:"blue-500"},kitakanto:{from:"green-50",to:"emerald-100",primary:"green-600",secondary:"emerald-500"},koshinetsu:{from:"purple-50",to:"violet-100",primary:"purple-600",secondary:"violet-500"}},ACTIVITY_COLORS:{matsuri:{from:"red-50",to:"red-100",primary:"red-600",secondary:"red-500"},hanami:{from:"pink-50",to:"pink-100",primary:"pink-600",secondary:"pink-500"},hanabi:{from:"blue-50",to:"blue-100",primary:"blue-600",secondary:"blue-500"},culture:{from:"green-50",to:"green-100",primary:"green-600",secondary:"green-500"},momiji:{from:"orange-50",to:"orange-100",primary:"orange-600",secondary:"orange-500"},illumination:{from:"purple-50",to:"purple-100",primary:"purple-600",secondary:"purple-500"}},generateBackgroundGradient:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hanabi",a=i.REGION_COLORS[e]||i.REGION_COLORS.tokyo,r=i.ACTIVITY_COLORS[t]||i.ACTIVITY_COLORS.hanabi;return"from-".concat(a.from," to-").concat(r.to)},generateTitleGradient:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hanabi",a=i.REGION_COLORS[e]||i.REGION_COLORS.tokyo,r=i.ACTIVITY_COLORS[t]||i.ACTIVITY_COLORS.hanabi;return"from-".concat(a.primary," via-").concat(a.secondary," to-").concat(r.primary)}};function o(e){let{region:t,events:a,pageTitle:s,pageDescription:o,regionKey:c="tokyo",activityKey:d="hanabi"}=e,[m,x]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[g,p]=(0,l.useState)({}),f=e=>{console.log("\uD83D\uDD0D 开始花火数据验证和修复...");let t=e.map((e,t)=>{var a;let r={...e};r.title||r.name||(console.warn("⚠️ 花火事件 ".concat(t," 缺少标题字段")),r.title="未命名花火大会 ".concat(t+1)),r.date||r.dates||(console.warn("⚠️ 花火事件 ".concat(t," 缺少日期字段")),r.date="日期待定");let s=r.date||r.dates||"";if(s&&!s.includes("年")&&!s.includes("2025")&&!s.includes("2026")){let e=new Date().getFullYear();s.match(/\d{1,2}月\d{1,2}日/)&&(r.date="".concat(e,"年").concat(s),console.log("✅ 自动添加年份: ".concat(r.date)))}return!r.highlights&&r.features?r.highlights=r.features:r.highlights||r.features||(r.highlights=[]),("number"!=typeof r.likes||isNaN(r.likes)||r.likes<0)&&(console.warn("⚠️ 花火事件 ".concat(t," 红心数异常: ").concat(r.likes)),r.likes=Math.max(0,Math.floor(Number(r.likes)||0))),r.location||(r.location="地点待定"),r.website||(r.website="#"),r.description||(r.description="详情待更新"),(null==(a=r._sourceData)?void 0:a.japaneseName)||(r._sourceData||(r._sourceData={japaneseName:""}),r._sourceData.japaneseName=r.title||r.name||""),r.englishName||(r.englishName=r.title||r.name||""),r});return console.log("✅ 花火数据验证完成，处理了 ".concat(t.length," 个事件")),t},b=(0,l.useMemo)(()=>f(a),[a]),N=()=>t.gradientColors?t.gradientColors:i.generateBackgroundGradient(c,d),j=()=>{let e=[{key:"tokyo",name:"东京都",emoji:"\uD83D\uDDFC",url:"/tokyo/hanabi"},{key:"saitama",name:"埼玉县",emoji:"\uD83C\uDF38",url:"/saitama/hanabi"},{key:"chiba",name:"千叶县",emoji:"\uD83C\uDF0A",url:"/chiba/hanabi"},{key:"kanagawa",name:"神奈川县",emoji:"⛵",url:"/kanagawa/hanabi"},{key:"kitakanto",name:"北关东",emoji:"♨️",url:"/kitakanto/hanabi"},{key:"koshinetsu",name:"甲信越",emoji:"\uD83D\uDDFB",url:"/koshinetsu/hanabi"}],t=e.findIndex(e=>e.key===c);if(-1===t)return{prev:{name:"甲信越",href:"/koshinetsu/hanabi",emoji:"\uD83D\uDDFB"},current:{name:"东京都",emoji:"\uD83D\uDDFC"},next:{name:"埼玉县",href:"/saitama/hanabi",emoji:"\uD83C\uDF38"}};let a=(t-1+e.length)%e.length,r=(t+1)%e.length,s=e[a],n=e[t],l=e[r];return{prev:{name:s.name,href:s.url,emoji:s.emoji},current:{name:n.name,emoji:n.emoji},next:{name:l.name,href:l.url,emoji:l.emoji}}},y=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",v=e=>y(e,15),w=e=>y(e,100),k=e=>{if(!e)return"日期待定";if(e.includes("年"))return e;let t=new Date(e);if(!isNaN(t.getTime()))return"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日");let a=new Date().getFullYear();return e.match(/\d{1,2}月\d{1,2}日/)?"".concat(a,"年").concat(e):e},D=(e,t)=>{if(!e)return"日期待定";try{if(e.includes(",")){let t=e.split(","),a=[];for(let e of t){let t=e.trim();if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let e=new Date(t);if(!isNaN(e.getTime())){let t=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();a.push("".concat(t,"年").concat(r,"月").concat(s,"日"))}}}if(a.length>0)if(a.length>3)return"".concat(a[0]," 等").concat(a.length,"天");else return a.join("、")}if(e.match(/^\d{4}-\d{2}-\d{2}$/)){let t=new Date(e);if(!isNaN(t.getTime())){let e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return"".concat(e,"年").concat(a,"月").concat(r,"日")}}let a=k(e);if(t){let e=k(t);return"".concat(a," - ").concat(e)}return a}catch(t){return console.warn("日期格式化错误:",t),e}},C=(0,l.useMemo)(()=>m||u?b.filter(e=>{let t=e.date||e.dates||"";if(!t)return!0;try{let e=(e=>{let t=[];if(e.includes(",")){for(let a of e.split(",")){let e=a.trim();if(e.match(/^\d{4}-\d{2}-\d{2}$/)){let a=new Date(e);isNaN(a.getTime())||t.push(a)}}if(t.length>0)return t}if(e.match(/^\d{4}-\d{2}-\d{2}$/)){let t=new Date(e);if(!isNaN(t.getTime()))return[t]}let a=e.match(/(\d{4})年(\d{1,2})月([上中下])旬/);if(a){let e,[,t,r,s]=a,n=parseInt(t),l=parseInt(r)-1;switch(s){case"上":e=5;break;case"中":default:e=15;break;case"下":e=25}let i=new Date(n,l,e);if(!isNaN(i.getTime()))return[i]}let r=e.match(/(\d{4})年(\d{1,2})月第(\d)个?([星期周]([一二三四五六日天]|[六末]))/);if(r){let[,e,t,a]=r,s=parseInt(e),n=parseInt(t)-1,l=parseInt(a),i=new Date(s,n,7*l);if(!isNaN(i.getTime()))return[i]}let s=e.match(/(\d{1,2})月第([一二三四])个?([星期周]([一二三四五六日天]|[六末]))/);if(s){let[,e,t]=s,a=new Date().getFullYear(),r=parseInt(e)-1,n=new Date(a,r,7*(({一:1,二:2,三:3,四:4})[t]||1));if(!isNaN(n.getTime()))return[n]}let n=e.match(/(\d{4})年(\d{1,2})月(\d{1,2})日/);if(n){let[,e,t,a]=n,r=new Date(parseInt(e),parseInt(t)-1,parseInt(a));if(!isNaN(r.getTime()))return[r]}let l=e.match(/(\d{1,2})月(\d{1,2})日/);if(l){let[,e,t]=l,a=new Date().getFullYear(),r=new Date(a,parseInt(e)-1,parseInt(t));if(!isNaN(r.getTime()))return[r]}let i=new Date(e);return isNaN(i.getTime())?[]:[i]})(t);if(0===e.length)return!0;let a=m?new Date(m):null,r=u?new Date(u):null;for(let t of e){let e=!0;if(a&&t<a&&(e=!1),r&&t>r&&(e=!1),e)return!0}return!1}catch(e){return console.warn("筛选日期处理错误:",e),!0}}):b,[b,m,u]),I=e=>{p(t=>({...t,[e]:(t[e]||0)+1}))};(0,l.useEffect)(()=>{let e={};b.forEach(t=>{e[t.id]=t.likes||0}),p(e)},[b]);let T=(0,l.useMemo)(()=>C.sort((e,t)=>{let a=new Date;a.setHours(0,0,0,0);let r=e.date||e.dates||"",s=t.date||t.dates||"",n=e=>{if(e.includes(",")){let t=e.split(","),a=[];for(let e of t){let t=e.trim();if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let e=new Date(t);isNaN(e.getTime())||a.push(e)}}if(a.length>0)return new Date(Math.min(...a.map(e=>e.getTime())))}if(e.match(/^\d{4}-\d{2}-\d{2}$/)){let t=new Date(e);if(!isNaN(t.getTime()))return t}let t=e.match(/(\d{4})年(\d{1,2})月([上中下])旬/);if(t){let e,[,a,r,s]=t,n=parseInt(a),l=parseInt(r)-1;switch(s){case"上":e=5;break;case"中":default:e=15;break;case"下":e=25}return new Date(n,l,e)}let a=e.match(/(\d{4})年(\d{1,2})月(\d{1,2})日/);if(a){let[,e,t,r]=a;return new Date(parseInt(e),parseInt(t)-1,parseInt(r))}let r=e.match(/(\d{4})年(\d{1,2})月/);if(r){let[,e,t]=r;return new Date(parseInt(e),parseInt(t)-1,1)}let s=new Date(e);return isNaN(s.getTime())?new Date(0):s},l=n(r),i=n(s);if(0===l.getTime()&&0===i.getTime())return 0;l.setHours(0,0,0,0),i.setHours(0,0,0,0);let o=a.getTime(),c=l.getTime(),d=i.getTime(),m=c>=o,x=d>=o;return m&&!x?-1:!m&&x?1:c-d}),[C]);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br ".concat(N()),children:[(0,r.jsx)("nav",{className:"pb-2 pt-4",children:(0,r.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,r.jsx)(n(),{href:"/",className:"font-medium transition-colors hover:text-blue-600",children:"\uD83C\uDFE0 首页"}),(0,r.jsx)("span",{className:"text-gray-400",children:"›"}),(0,r.jsxs)("a",{href:t.navigationLinks.current.url,className:"font-medium transition-colors hover:text-blue-600",children:[t.emoji," ",t.displayName,"活动"]}),(0,r.jsx)("span",{className:"text-gray-400",children:"›"}),(0,r.jsx)("span",{className:"font-medium text-blue-600",children:"\uD83C\uDF86 花火大会"})]})})}),(0,r.jsx)("section",{className:"pb-12 pt-12 text-center",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-center",children:[(0,r.jsx)("span",{className:"mr-4 text-5xl",children:t.emoji}),(0,r.jsx)("h1",{className:"bg-gradient-to-r text-4xl font-bold md:text-5xl ".concat((()=>{let e={tokyo:"from-red-600 via-rose-500 to-orange-600",saitama:"from-orange-600 via-amber-500 to-red-600",chiba:"from-sky-600 via-cyan-500 to-blue-600",kanagawa:"from-blue-600 via-blue-500 to-cyan-600",kitakanto:"from-green-600 via-emerald-500 to-blue-600",koshinetsu:"from-purple-600 via-violet-500 to-blue-600"};return e[c]||e.tokyo})()," bg-clip-text text-transparent"),children:s||"".concat(t.displayName,"花火大会")}),(0,r.jsx)("span",{className:"ml-4 text-5xl",children:"\uD83C\uDF86"})]}),(0,r.jsx)("p",{className:"mx-auto max-w-7xl text-lg leading-relaxed text-gray-700 md:text-xl",children:o||"体验".concat(t.displayName,"最精彩的花火大会，感受").concat(t.description)})]})}),(0,r.jsx)("section",{className:"py-8",children:(0,r.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"bg-gradient-to-r ".concat(N()," rounded-2xl border-2 border-white/30 p-6 shadow-lg"),children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 md:flex-row",children:[(0,r.jsxs)("label",{className:"flex items-center text-lg font-medium text-gray-700",children:[(0,r.jsx)("span",{className:"mr-2 text-2xl",children:"\uD83D\uDCC5"}),"筛选日期："]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,r.jsx)("label",{className:"text-sm text-gray-600",children:"开始日期："}),(0,r.jsx)("input",{type:"date",value:m,onChange:e=>x(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,r.jsx)("label",{className:"text-sm text-gray-600",children:"结束日期："}),(0,r.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),min:m,className:"rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"})]}),(m||u)&&(0,r.jsx)("button",{onClick:()=>{x(""),h("")},className:"rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700",children:"清除筛选"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["共找到 ",T.length," 场花火大会"]})]})})})}),(0,r.jsx)("section",{className:"py-12",children:(0,r.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"grid gap-6 md:gap-8",children:T.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r ".concat(N()," transform rounded-3xl border-2 border-white/40 p-6 shadow-xl backdrop-blur-sm transition-all duration-300 hover:-translate-y-2 hover:scale-105 hover:shadow-2xl md:p-8"),children:(0,r.jsx)("div",{className:"flex flex-col items-start gap-6 lg:flex-row lg:items-center",children:(0,r.jsx)("div",{className:"flex-grow",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-800 md:text-2xl",children:e.title||e.name}),(0,r.jsx)("p",{className:"mb-3 text-sm text-gray-500",children:w(e.description)}),(0,r.jsxs)("div",{className:"mb-3 flex flex-wrap gap-4 text-sm text-gray-700 md:text-base",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-1 text-lg",children:"\uD83D\uDCC5"}),D(e.date||e.dates,e.endDate)]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-1 text-lg",children:"\uD83D\uDCCD"}),e.location]}),e.fireworksCount&&(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-1 text-lg",children:"\uD83C\uDF86"}),e.fireworksCount,"发"]}),e.expectedVisitors&&(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-1 text-lg",children:"\uD83D\uDC65"}),"number"==typeof e.expectedVisitors?"".concat(e.expectedVisitors.toLocaleString(),"人"):e.expectedVisitors]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(e.highlights||e.features||[]).map((e,t)=>(0,r.jsx)("span",{className:"rounded-full bg-white/70 px-3 py-1 text-sm font-medium text-gray-700",children:v(e)},t))})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>I(e.id),className:"flex transform items-center gap-2 rounded-full border border-amber-200 bg-amber-50 px-4 py-2 text-gray-800 shadow-lg transition-all duration-200 hover:scale-110 hover:bg-amber-100",children:[(0,r.jsx)("span",{className:"text-xl",children:"❤️"}),(0,r.jsx)("span",{className:"font-bold",children:Math.floor(g[e.id]||0)})]}),e.detailLink&&(0,r.jsx)("a",{href:e.detailLink,className:"flex transform items-center gap-2 whitespace-nowrap rounded-full border border-blue-200 bg-blue-50 px-4 py-2 text-blue-800 shadow-lg transition-all duration-200 hover:scale-110 hover:bg-blue-100",children:(0,r.jsx)("span",{className:"font-bold",children:"查看详情"})})]})]})})})},e.id))})})}),(0,r.jsx)("section",{className:"border-t border-white/20 py-8",children:(0,r.jsxs)("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-6 text-center",children:(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"探索其他地区花火大会"})}),(()=>{let e=j();return e?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,r.jsxs)("a",{href:e.prev.href,className:"group flex items-center space-x-3 rounded-xl border-2 border-cyan-200 bg-gradient-to-br from-cyan-50 to-blue-100 p-4 shadow-lg transition-all duration-200 hover:scale-105",children:[(0,r.jsx)("div",{className:"text-2xl",children:e.prev.emoji}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"text-sm text-cyan-700",children:"← 上一个"}),(0,r.jsxs)("div",{className:"font-bold text-cyan-800 transition-colors group-hover:text-cyan-900",children:[e.prev.name,"花火"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 rounded-xl border-2 border-blue-300 bg-gradient-to-br from-blue-50 to-indigo-100 p-4 shadow-lg",children:[(0,r.jsx)("div",{className:"text-3xl",children:e.current.emoji}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm text-blue-600",children:"当前位置"}),(0,r.jsxs)("div",{className:"font-bold text-blue-600",children:[e.current.name,"花火"]})]})]}),(0,r.jsxs)("a",{href:e.next.href,className:"group flex items-center space-x-3 rounded-xl border-2 border-slate-200 bg-gradient-to-br from-slate-50 to-gray-100 p-4 shadow-lg transition-all duration-200 hover:scale-105",children:[(0,r.jsx)("div",{className:"text-2xl",children:e.next.emoji}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm text-slate-700",children:"下一个 →"}),(0,r.jsxs)("div",{className:"font-bold text-slate-800 transition-colors group-hover:text-slate-900",children:[e.next.name,"花火"]})]})]})]}):null})()]})})]})}},8820:(e,t,a)=>{Promise.resolve().then(a.bind(a,2458))}}]);