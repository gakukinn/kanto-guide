# 花火活动链接验证脚本使用指南

## 📋 验证结果汇总（已修正）

### 🎆 东京都花火活动 - 完美状态 ✅

**验证结果：**

- ✅ 检查了 **14个** 花火活动
- ✅ 谷歌地图链接：**全部14个有效**
- ✅ 官方网站链接：**全部14个有效**
- ✅ **无任何问题**

### �� 全地区验证统计（修正后）

| 地区                        | 活动数量 | 地图链接状态 | 官网链接状态 | 问题数量 |
| --------------------------- | -------- | ------------ | ------------ | -------- |
| 🏙️ 东京都                   | 14       | ✅ 14/14     | ✅ 14/14     | 0        |
| 🌸 埼玉县                   | 13       | ✅ 13/13     | ✅ 13/13     | 0        |
| 🌊 千叶县                   | 14       | ✅ 14/14     | ✅ 14/14     | 0        |
| ⛰️ 神奈川县                 | 8        | ✅ 8/8       | ✅ 8/8       | 0        |
| 🏔️ 北关东                   | 13       | ⚠️ 10/13     | ✅ 13/13     | 3        |
| 🗻 甲信越                   | 14       | ⚠️ 13/14     | ✅ 14/14     | 1        |
| 📁 混合地区(src/data根目录) | 10       | ⚠️ 8/10      | ✅ 10/10     | 2        |

**总体统计（修正后）：**

- 📊 总检查活动：**86个**（之前遗漏了10个）
- 🗺️ 有效地图链接：**80个** (93.0%)
- 🌐 有效官网链接：**86个** (100%)

## 🚨 需要修复的问题（更新）

### 北关东地区（3个问题）：

1. **第58回常总绹川花火大会** - 缺少地图URL
2. **大洗海上花火大会2025〜千櫓祭〜** - 缺少地图URL
3. **第38回利根川大花火大会** - 缺少地图URL

### 甲信越地区（1个问题）：

1. **河口湖湖上祭** - 缺少地图URL

### 混合地区/根目录（2个问题）：

1. **神田祭** - 缺少地图URL
2. **三社祭** - 缺少地图URL

## 🛠️ 脚本使用方法

### 基本命令

```bash
# 检查所有地区（包括src/data根目录）
node scripts/validate-hanabi-links.mjs

# 检查指定地区
node scripts/validate-hanabi-links.mjs tokyo     # 东京都
node scripts/validate-hanabi-links.mjs saitama  # 埼玉县
node scripts/validate-hanabi-links.mjs chiba    # 千叶县
node scripts/validate-hanabi-links.mjs kanagawa # 神奈川县
node scripts/validate-hanabi-links.mjs kitakanto # 北关东
node scripts/validate-hanabi-links.mjs koshinetsu # 甲信越
node scripts/validate-hanabi-links.mjs mixed    # 混合地区(src/data根目录)
```

### 验证内容

脚本会检查每个花火活动的：

1. **🗺️ 谷歌地图嵌入链接 (mapEmbedUrl)**

   - URL格式是否正确
   - 是否包含必需的pb参数
   - 是否为有效的Google Maps嵌入URL

2. **🌐 官方网站链接 (website)**

   - URL格式是否正确
   - 协议和主机名是否有效

3. **📞 联系信息 (contact)**
   - 是否包含电话号码
   - 主办方信息

## 📁 输出文件

脚本会生成详细的JSON报告：

```
scripts/hanabi-links-validation-report-YYYY-MM-DD.json
```

## 🎯 四层详情模板集成

所有花火活动都使用统一的 `HanabiDetailTemplate.tsx` 模板，确保：

- ✅ 统一的用户界面体验
- ✅ 标准化的数据结构
- ✅ 自动验证数据完整性
- ✅ 响应式设计支持

## 📈 质量评估（更新）

### 🏆 优秀地区

- **东京都** - 100% 完善 🥇
- **埼玉县** - 100% 完善 🥇
- **千叶县** - 100% 完善 🥇
- **神奈川县** - 100% 完善 🥇

### ⚠️ 需要改进地区

- **北关东** - 23% 地图链接缺失（3/13）
- **甲信越** - 7% 地图链接缺失（1/14）
- **混合地区** - 20% 地图链接缺失（2/10）

## 🔧 建议改进措施

### 1. 立即修复（高优先级）

为缺失地图URL的6个活动添加Google Maps嵌入链接：

```typescript
mapEmbedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!...';
```

### 2. 数据验证（中优先级）

- 在CI/CD流程中集成验证脚本
- 定期运行验证确保数据质量

### 3. 用户体验优化（低优先级）

- 为缺失地图的活动添加文字地址说明
- 提供替代的位置信息

## 📝 维护建议

1. **定期验证**：每月运行一次全面验证
2. **新增活动**：添加新活动时必须包含完整信息
3. **链接更新**：官方网站变更时及时更新
4. **模板统一**：确保所有页面都使用 `HanabiDetailTemplate`

## 🎉 结论（修正版）

通过验证脚本，我们确认了：

✅ **东京都花火活动链接完全正确** - 谷歌地图和官方网站链接都100%有效

✅ **整体数据质量优秀** - 93.0%的地图链接有效，100%的官网链接有效

⚠️ **需修复6个地图链接** - 占总数86个的7.0%，修复工作量很小

这套验证工具准确检查了86个花火活动，确保用户获得最完整可靠的活动信息。
