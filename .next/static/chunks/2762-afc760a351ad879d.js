(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2762],{2762:(e,t,a)=>{Promise.resolve().then(a.bind(a,9190))},9190:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(5155),r=a(6874),l=a.n(r),n=a(2115);let c={REGION_COLORS:{tokyo:"red",saitama:"orange",chiba:"sky",kanagawa:"blue",kitakanto:"green",koshinetsu:"purple"},ACTIVITY_COLORS:{matsuri:"red",hanami:"pink",hanabi:"blue",culture:"green",momiji:"orange",illumination:"purple"},generateBackgroundGradient:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"matsuri",a=c.REGION_COLORS[e]||"red",s=c.ACTIVITY_COLORS[t]||"red";return a===s?"from-".concat(a,"-100 to-").concat(a,"-200"):"from-".concat(a,"-100 to-").concat(s,"-200")}};function i(e){let{region:t,events:a,pageTitle:r,pageDescription:i,regionKey:d="tokyo",activityKey:o="matsuri"}=e,[x,m]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[g,p]=(0,n.useState)({}),f=e=>{if(console.log("\uD83D\uDD0D 开始数据验证和修复..."),!Array.isArray(e))return console.warn("⚠️ 传入的events不是数组，返回空数组"),[];let t=e.map((e,t)=>{var a;let s={...e};s.title||s.name||(console.warn("⚠️ 事件 ".concat(t," 缺少标题字段")),s.title="未命名祭典 ".concat(t+1)),s.date||s.dates||(console.warn("⚠️ 事件 ".concat(t," 缺少日期字段")),s.date="日期待定");let r=s.date||s.dates||"";if(r&&!r.includes("年")&&!r.includes("2025")&&!r.includes("2026")){let e=new Date().getFullYear();r.match(/\d{1,2}月\d{1,2}日/)&&(s.date="".concat(e,"年").concat(r),console.log("✅ 自动添加年份: ".concat(s.date)))}return!s.highlights&&s.features?s.highlights=s.features:s.highlights||s.features||(s.highlights=[]),("number"!=typeof s.likes||isNaN(s.likes)||s.likes<0)&&(console.warn("⚠️ 事件 ".concat(t," 红心数异常: ").concat(s.likes)),s.likes=Math.max(0,Math.floor(Number(s.likes)||0))),s.location||(s.location="地点待定"),s.website||(s.website="#"),s.description||(s.description="详情待更新"),(null==(a=s._sourceData)?void 0:a.japaneseName)||(s._sourceData||(s._sourceData={japaneseName:""}),s._sourceData.japaneseName=s.title||s.name||""),s.englishName||(s.englishName=s.title||s.name||""),s});return console.log("✅ 数据验证完成，处理了 ".concat(t.length," 个事件")),t},N=(0,n.useMemo)(()=>f(a),[a]),b=()=>t.gradientColors?t.gradientColors:c.generateBackgroundGradient(d,o),j=()=>({prev:{name:"千叶县",href:"/chiba/matsuri",emoji:"\uD83C\uDF0A"},current:{name:"东京都",emoji:"\uD83D\uDDFC"},next:{name:"神奈川县",href:"/kanagawa/matsuri",emoji:"⛵"}}),v=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",w=e=>v(e,15),y=e=>v(e,100),D=e=>{if(!e)return"日期待定";if(e.includes("年"))return e;let t=new Date(e);if(!isNaN(t.getTime()))return"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日");let a=new Date().getFullYear();return e.match(/\d{1,2}月\d{1,2}日/)?"".concat(a,"年").concat(e):e},k=(e,t)=>{if(!e)return"日期待定";try{let a=D(e);if(t){let e=D(t);return"".concat(a," - ").concat(e)}return a}catch(t){return console.warn("日期格式化错误:",t),e}},C=(0,n.useMemo)(()=>x||u?N.filter(e=>{let t=e.date||e.dates||"";if(!t)return!0;try{let e=(e=>{let t=e.match(/(\d{4})年(\d{1,2})月(\d{1,2})日/);if(t){let[,e,a,s]=t;return new Date(parseInt(e),parseInt(a)-1,parseInt(s))}let a=e.match(/(\d{1,2})月(\d{1,2})日/);if(a){let[,e,t]=a,s=new Date().getFullYear();return new Date(s,parseInt(e)-1,parseInt(t))}let s=new Date(e);return isNaN(s.getTime())?null:s})(t);if(!e)return!0;let a=x?new Date(x):null,s=u?new Date(u):null;if(a&&e<a||s&&e>s)return!1;return!0}catch(e){return console.warn("筛选日期处理错误:",e),!0}}):N,[N,x,u]),I=e=>{p(t=>({...t,[e]:(t[e]||0)+1}))};(0,n.useEffect)(()=>{let e={};N.forEach(t=>{e[t.id]=t.likes||0}),p(e)},[N]);let _=(0,n.useMemo)(()=>C.sort((e,t)=>{let a=new Date;a.setHours(0,0,0,0);let s=e.date||e.dates||"",r=t.date||t.dates||"",l=e=>{let t=e.match(/(\d{4})年(\d{1,2})月(\d{1,2})日/);if(t){let[,e,a,s]=t;return new Date(parseInt(e),parseInt(a)-1,parseInt(s))}let a=e.match(/(\d{4})年(\d{1,2})月/);if(a){let[,e,t]=a;return new Date(parseInt(e),parseInt(t)-1,1)}let s=new Date(e);return isNaN(s.getTime())?new Date(0):s},n=l(s),c=l(r);if(0===n.getTime()&&0===c.getTime())return 0;n.setHours(0,0,0,0),c.setHours(0,0,0,0);let i=a.getTime(),d=n.getTime(),o=c.getTime(),x=d>=i,m=o>=i;return x&&!m?-1:!x&&m?1:d-o}),[C]);return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br ".concat(b()),children:[(0,s.jsx)("nav",{className:"pb-2 pt-4",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,s.jsx)(l(),{href:"/",className:"font-medium transition-colors hover:text-red-600",children:"\uD83C\uDFE0 首页"}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"}),(0,s.jsxs)(l(),{href:t.navigationLinks.current.url,className:"font-medium transition-colors hover:text-red-600",children:[t.emoji," ",t.displayName,"活动"]}),(0,s.jsx)("span",{className:"text-gray-400",children:"›"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:"\uD83C\uDFEE 传统祭典"})]})})}),(0,s.jsx)("section",{className:"pb-12 pt-12 text-center",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-center",children:[(0,s.jsx)("span",{className:"mr-4 text-5xl",children:t.emoji}),(0,s.jsx)("h1",{className:"bg-gradient-to-r from-red-600 via-red-500 to-orange-600 bg-clip-text text-4xl font-bold text-transparent md:text-5xl",children:r||"".concat(t.displayName,"传统祭典")}),(0,s.jsx)("span",{className:"ml-4 text-5xl",children:"\uD83C\uDFEE"})]}),(0,s.jsx)("p",{className:"mx-auto max-w-7xl text-lg leading-relaxed text-gray-700 md:text-xl",children:i||"体验".concat(t.displayName,"最具传统文化魅力的祭典活动，感受").concat(t.description)})]})}),(0,s.jsx)("section",{className:"py-8",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"rounded-2xl border-2 border-red-200 bg-gradient-to-r from-red-50 to-red-100 p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 md:flex-row",children:[(0,s.jsxs)("label",{className:"flex items-center text-lg font-medium text-gray-700",children:[(0,s.jsx)("span",{className:"mr-2 text-2xl",children:"\uD83D\uDCC5"}),"筛选日期："]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"开始日期："}),(0,s.jsx)("input",{type:"date",value:x,onChange:e=>m(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 focus:border-red-500 focus:ring-2 focus:ring-red-500"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"结束日期："}),(0,s.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),min:x,className:"rounded-lg border border-gray-300 px-4 py-2 focus:border-red-500 focus:ring-2 focus:ring-red-500"})]}),(x||u)&&(0,s.jsx)("button",{onClick:()=>{m(""),h("")},className:"rounded-lg bg-red-600 px-4 py-2 text-white transition-colors hover:bg-red-700",children:"清除筛选"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["共找到 ",_.length," 场传统祭典"]})]})})})}),(0,s.jsx)("section",{className:"py-12",children:(0,s.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"grid gap-6 md:gap-8",children:_.map(e=>(0,s.jsx)("div",{className:"bg-gradient-to-r ".concat(b()," transform rounded-3xl border-2 p-6 shadow-xl backdrop-blur-sm transition-all duration-300 hover:-translate-y-2 hover:scale-105 hover:shadow-2xl md:p-8"),children:(0,s.jsx)("div",{className:"flex flex-col items-start gap-6 lg:flex-row lg:items-center",children:(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-800 md:text-2xl",children:e.title||e.name}),(0,s.jsx)("p",{className:"mb-3 text-sm text-gray-500",children:y(e.description)}),(0,s.jsxs)("div",{className:"mb-3 flex flex-wrap gap-4 text-sm text-gray-700 md:text-base",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-1 text-lg",children:"\uD83D\uDCC5"}),k(e.date||e.dates,e.endDate)]}),(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-1 text-lg",children:"\uD83D\uDCCD"}),e.location]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:(e.highlights||e.features||[]).map((e,t)=>(0,s.jsx)("span",{className:"rounded-full bg-white/70 px-3 py-1 text-sm font-medium text-gray-700",children:w(e)},t))})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsxs)("button",{onClick:()=>I(e.id),className:"flex transform items-center gap-2 rounded-full border border-amber-200 bg-amber-50 px-4 py-2 text-gray-800 shadow-lg transition-all duration-200 hover:scale-110 hover:bg-amber-100",children:[(0,s.jsx)("span",{className:"text-xl",children:"❤️"}),(0,s.jsx)("span",{className:"font-bold",children:Math.floor(g[e.id]||0)})]}),(0,s.jsxs)("a",{href:"https://www.youtube.com/results?search_query=".concat(encodeURIComponent((e.title||e.name||"")+" 祭典")),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 whitespace-nowrap rounded-full border border-red-200 bg-red-50 px-4 py-2 text-red-700 shadow-lg transition-all duration-200 hover:bg-red-100",children:[(0,s.jsx)("span",{className:"text-lg",children:"▶️"}),(0,s.jsx)("span",{className:"font-medium",children:"视频"})]}),(0,s.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 whitespace-nowrap rounded-full border border-blue-200 bg-blue-50 px-4 py-2 text-blue-700 shadow-lg transition-all duration-200 hover:bg-blue-100",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDF10"}),(0,s.jsx)("span",{className:"font-medium",children:"官网"})]})]})]})})})},e.id))})})}),(0,s.jsx)("section",{className:"border-t border-white/20 py-8",children:(0,s.jsxs)("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"mb-6 text-center",children:(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"探索其他地区传统祭典"})}),(()=>{let e=j();return e?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,s.jsxs)(l(),{href:e.prev.href,className:"group flex items-center space-x-3 rounded-xl border-2 border-cyan-200 bg-gradient-to-br from-cyan-50 to-blue-100 p-4 shadow-lg transition-all duration-200 hover:scale-105",children:[(0,s.jsx)("div",{className:"text-2xl",children:e.prev.emoji}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"text-sm text-cyan-700",children:"← 上一个"}),(0,s.jsxs)("div",{className:"font-bold text-cyan-800 transition-colors group-hover:text-cyan-900",children:[e.prev.name,"祭典"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 rounded-xl border-2 border-red-300 bg-gradient-to-br from-red-50 to-orange-100 p-4 shadow-lg",children:[(0,s.jsx)("div",{className:"text-3xl",children:e.current.emoji}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-red-600",children:"当前位置"}),(0,s.jsxs)("div",{className:"font-bold text-red-600",children:[e.current.name,"祭典"]})]})]}),(0,s.jsxs)(l(),{href:e.next.href,className:"group flex items-center space-x-3 rounded-xl border-2 border-slate-200 bg-gradient-to-br from-slate-50 to-gray-100 p-4 shadow-lg transition-all duration-200 hover:scale-105",children:[(0,s.jsx)("div",{className:"text-2xl",children:e.next.emoji}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-slate-700",children:"下一个 →"}),(0,s.jsxs)("div",{className:"font-bold text-slate-800 transition-colors group-hover:text-slate-900",children:[e.next.name,"祭典"]})]})]})]}):null})()]})})]})}}}]);